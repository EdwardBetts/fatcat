{% extends "base.html" %}

{% macro lookup_form(key, example, lookup_key, lookup_value, lookup_error) -%}
<form class="ui form" role="search" action="/release/lookup" method="get">
  <div class="ui form">
    <div class="field {% if key == lookup_key %}{% if lookup_error == 400 %}error{% elif lookup_error == 404 %}warning{% endif %}{% endif %}">
      {% if key == lookup_key and lookup_error == 400 %}
        <div class="ui pointing below red label">
          Not correct syntax. Expected, eg, {{ example }}
        </div>
      {% endif %}
      <div class="ui action input big fluid">
        <input type="text" placeholder="{% if example %}eg, {{ example }}{% endif %}" name="{{ key }}" value="{% if key == lookup_key %}{{ lookup_value }}{% endif %}" aria-label="{{ key }} lookup">
        <button class="ui button">Go!</button>
      </div>
    </div>
  </div>
</form>
{%- endmacro %}

{% block body %}

<h1>Lookup Release by Identifier</h1>

{% if lookup_error == 400 %}
<div class="ui error message">
<div class="header">400: Syntax Error</div>
<b>{{ lookup_key }}:{{ lookup_value }}</code></b> doesn't look right to us. See
below for details.
</div>
{% elif lookup_error == 404 %}
<div class="ui error message">
<div class="header">404: Not Found</div>
Couldn't find a release with that identifier (<b><code>{{ lookup_key }}:{{
lookup_value }}</code></b>). If you think it should be in the catalog, you could
search for an existing record missing that identifier, or create a new release
entity. 
{% if lookup_key == "doi" %}
<p>You can check if it is a registered DOI by visiting:
<b><a href="https://doi.org/{{ lookup_value }}">https://doi.org/{{ lookup_value }}</a></b>
{% elif lookup_key == "pmcid" %}
<p>You can check if it is a real PMCID by visiting:
<b><a href="https://www.ncbi.nlm.nih.gov/pmc/articles/{{ lookup_value }}/">https://www.ncbi.nlm.nih.gov/pmc/articles/{{ lookup_value }}/</a></b>
{% else %}
{% endif %}
</div>
{% endif %}

<div class="ui top attached segment">

<h2>DOI</h2>
<p><a href="https://en.wikipedia.org/wiki/Digital_object_identifier">
Digital object identifer</a>: "it's not an identifier for a digital object,
it's a digital identifier for an object". Except they are pretty much all
digital objects. Fatcat doesn't include all DOIs (eg, for granular components
or TV shows), but it should for all complete research publications. DOIs are
generated by publishers, who pay a fee to registrars like Crossref, Datacite,
or JALC.
{{ lookup_form("doi", "10.1234/abc.5489", lookup_key, lookup_value, lookup_error) }}
<i>&nbsp; Don't include a URL like "http://dx.doi.org/"</i>

</div>
<div class="ui attached segment">

<h2>PubMed</h2>
<p><a href="https://en.wikipedia.org/wiki/PubMed">PubMed/MEDLINE</a> is a
catalog of biomedical publications. Catalog updates are published frequently,
and may include deletions. Fatcat currently is only updated with new entries,
it does not delete PMIDs. PubMed is edited by a large staff of trained
catalogers, and has strict inclusion criteria for journals.
{{ lookup_form("pmid", "823835", lookup_key, lookup_value, lookup_error) }}
<br>

<p><a href="https://en.wikipedia.org/wiki/PubMed_Central#PMCID">PubMed Central
Identifiers (PMCID)</a> reference works deposited in the US (or European) PMC
repositories. Not all works with a PMCID have a PMID. PMCIDs can be versioned
(eg, with a trailing ".2"), but these are rare and most Fatcat releases only
have the non-versioned PMCID.
{{ lookup_form("pmcid", "PMC93932", lookup_key, lookup_value, lookup_error) }}
<i>&nbsp; Include the "PMC" prefix.</i>

</div>
<div class="ui attached segment">

<h2>Wikidata QID</h2>
<p><a href="https://en.wikipedia.org/wiki/Wikidata#Items">Wikidata</a> is the
structured, machine-readable database that complements Wikipedia. Entities,
which can include bibliographic entities like books and papers, are identified
by a "QID". Fatcat also links container (journal) and creator (author) entities
to Wikidata by QID. Anybody can edit Wikidata and create QIDs.
{{ lookup_form("wikidata_qid", "Q94324", lookup_key, lookup_value, lookup_error) }}
<i>&nbsp; Include the "Q" prefix.</i>

</div>
<div class="ui attached segment">

<h2>ARK</h2>
<p><a href="https://en.wikipedia.org/wiki/Archival_Resource_Key">Archival
Resource Keys</a> are no-cost, distributed identifiers based on URLs. Mostly
used by archival systems (as opposed to publishers or repositories).
{{ lookup_form("ark", "ark:2349/sddd92", lookup_key, lookup_value, lookup_error) }}
<i>&nbsp; Only the identifier part (starting with "ark:"), not the full URL.</i>

</div>
<div class="ui attached segment">

<h2>ISBN</h2>
<p><a href="https://en.wikipedia.org/wiki/International_Standard_Book_Number">
International Standard Book Number</a>, assigned to specific published versions
of a book (including ebooks).
{{ lookup_form("isbn13", "978-3-16-148410-0", lookup_key, lookup_value, lookup_error) }}
<i>&nbsp; Canonical ISBN-13 number (not ISBN-9), with hyphens</i>

</div>
<div class="ui attached segment">

<h2>arXiv</h2>
<p><a href="https://arxiv.org/help/arxiv_identifier">arXiv identifiers</a> are
generated for works deposited in the free arxiv.org pre-print repository.
Identifiers are generated for each version of a work, eg ending in "v3". Fatcat
releases must be versioned; if you don't know the version you can always lookup
"v1" and then look for other releases under the same work.
{{ lookup_form("arxiv", "0706.0001v1 or math-GT/0309136v2", lookup_key, lookup_value, lookup_error) }}
<i>&nbsp; Old and new style supported, but version always required for exact lookups.</i>

</div>
<div class="ui attached bottom segment">

<h2>JSTOR</h2>
<p><a href="https://en.wikipedia.org/wiki/JSTOR#Content">JSTOR identifiers</a>
are numbers internally assigned to works archived on
<a href="https://jstor.org">jstor.org</a>. Many works also have a DOI with the
number after a <code>10.2307/</code> prefix, but not all works have such a DOI.
Fatcat mostly has JSTOR identifiers for works in the "Early Journal
Collection", which are in the public domain.
{{ lookup_form("jstor", "92492", lookup_key, lookup_value, lookup_error) }}

</div>

{% endblock %}
